@using Blazorise.TreeView
@using Ididit.Data.Models

<Card Margin=Margin.Is2.OnY>
<CardBody Padding=Padding.Is1>

    <Button Color=Color.Primary Outline=true Size="Size" @onclick=ShowAllGoals><Icon Name="IconName.Remove" />Show all goals</Button>
    <Button Color=Color.Primary Outline=true Size="Size" @onclick=NewCategory><Icon Name="IconName.Add" />Add category</Button>
    <Button Color=Color.Primary Outline=true Size="Size" @onclick=ToggleAll>Toggle all</Button>

    <TreeView Margin=Margin.Is0.Is1.FromTop
              TNode="CategoryModel"
              Nodes=Repository.CategoryList
              GetChildNodes="GetChildNodes"
              HasChildNodes="HasChildNodes"
              SelectedNode=SelectedCategory
              SelectedNodeChanged="OnSelectedCategoryChanged"
              NodeStyling="NodeStyling"
              SelectedNodeStyling="SelectedNodeStyling"
              @bind-ExpandedNodes=_expandedNodes>
        <NodeContent>
            @if (context == SelectedCategory)
            {
                <EditCategoryComponent @bind-Category=context @bind-EditCategory=_editCategory />
            }
            else
            {
                @context?.Name
            }
        </NodeContent>
    </TreeView>

</CardBody>
</Card>
