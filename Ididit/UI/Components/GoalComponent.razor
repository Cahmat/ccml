@using Ididit.Data.Models

<Card Margin=Margin.Is3.FromTop Border=Border.Is0>
    <CardBody Padding=Padding.Is0>
        <div @onclick=SelectGoal>
            <EditGoalComponent @bind-Goal=Goal EditGoal=EditGoal EditGoalChanged=EditGoalChanged />
        </div>

        @if (SelectedGoal == Goal)
        {
            <MemoEdit @ref=_memoEdit AutoSize Text="@Goal.Details" Rows="@Goal.Rows" Margin=Margin.Is0.Is1.FromTop Padding=Padding.Is1 Border=Border.Is0 TextChanged=OnTextChanged />
        }
        else
        {
            <Div Margin=Margin.Is1.FromTop Padding=Padding.Is1>
                @foreach(TaskModel task in Goal.TaskList)
                {
                    @if (task.MarkdownHtml is null)
                    {
                        <TaskComponent Task=task @bind-SelectedTask=_selectedTask />
                    }
                    else
                    {
                        @((MarkupString)task.MarkdownHtml)
                    }
                }
            </Div>
        }
    </CardBody>
</Card>
